# CryptBudding Simulation Parameters (Node2D)

# ══════════════════════════════════════════════════════════════
#  SIMULATION
# ══════════════════════════════════════════════════════════════

[Simulation]
modelType = node2d
endTime = 30
dt = 0.005
dtGrow = 0.005
relaxationTime = 10
runNumber = 1

# ══════════════════════════════════════════════════════════════
#  FEATURE TOGGLES
# ══════════════════════════════════════════════════════════════

[Features]
enableLumenPressure = true
enableApicalConstriction = false
enableEcmGuidance = false
enableRelaxation = false
enableSloughing = false
enableDifferentialAdhesion = false
enableCurvatureBending = true
enableCellPolarity = false
enableEcmConfinement = true
enableContinuousPvd = false
useTopologyBasedSprings = false    # true = topology-based neighbors (ring/surface), false = distance threshold

# ══════════════════════════════════════════════════════════════
#  GEOMETRY
# ══════════════════════════════════════════════════════════════

[Geometry2D]
numCells2dNode = 18           # NODE-2D: cells on ring → R = N/(2π) ≈ 4.77, spacing = 1.0
numCells2dVertex = 18         # VERTEX-2D: annulus cells → auto-derives innerRadius2d, outerRadius2d
interactionCutoff2d = 1.5    # NODE-2D: neighbour cutoff (must be > spacing)
t1Threshold2d = 0.15          # VERTEX-2D only
t2Threshold2d = 0.05          # VERTEX-2D only

[Geometry3D]
numCells3dNode = 30           # NODE-3D: sphere cells → auto-derives organoidRadius3d = √(N/4π)
numCells3dVertex = 18         # VERTEX-3D only
shellThickness3d = 0.5
interactionCutoff3d = 1.5
bmOffset3dVertex = 0

# ══════════════════════════════════════════════════════════════
#  FORCES
# ══════════════════════════════════════════════════════════════

# --- Spring Force (RingSpringForce / GeneralisedLinearSpringForce) ---
[SpringForce]
springStiffness = 5
springCutoff = 1.5

# --- Differential Adhesion Force ---
[DifferentialAdhesionForce]
apicalApicalAdhesion = 1.2
basalBasalAdhesion = 1
apicalBasalAdhesion = 0.5

# --- Lumen Pressure Force ---
[LumenPressureForce]
lumenPressure = 1           # Above 2 causes blowout in vertex model

# --- Apical Constriction Force ---
[ApicalConstrictionForce]
apicalConstrictionStrength = 2

# --- Ring Smoothing / Curvature Bending Force ---
[RingSmoothingForce]
bendingStiffness = 20
gammaStemScale = 0.7          # Stem cells are softer
gammaTransitScale = 1
gammaDiffScale = 1.3          # Paneth/differentiated are stiffer

# --- ECM Confinement Force ---
[ECMConfinementForce]
ecmStiffness = 50.0
bmRadiusFraction = 1.25       # BM target radius as fraction of organoidRadius
ecmMaxRadiusFraction = 5.0    # ECM boundary as fraction of organoidRadius
ecmGridSpacing = 0.5        # ECM grid voxel size (should be ~ cell spacing)
ecmGridType = hex          # Grid layout: "square" or "hex"
ecmDegradationRate = 0.5      # ECM density loss per cell per unit time
ecmDiffusionCoeff = 0.1       # Density smoothing coefficient (prevents sharp gradients)

# --- Cell Polarity Force ---
[CellPolarityForce]
polarityBendingStrength = 25
polarityAlignmentStrength = 0.3

# --- ECM Contact Guidance Force (3D only) ---
[ECMGuidanceForce]
ecmBaseSpeed = 0.3            # Base cell migration speed (if guidance enabled)

# ══════════════════════════════════════════════════════════════
#  VERTEX MODEL (Nagai-Honda parameters)
# ══════════════════════════════════════════════════════════════

[VertexModel]
nhMembraneSurface = 10
nhCellCellAdhesion = 1
nhBoundaryAdhesion = 2
gammaApical = 0.85
gammaBasal = 0.85
gammaLateral = 0.7

# ══════════════════════════════════════════════════════════════
#  CELL TYPES & CYCLE
# ══════════════════════════════════════════════════════════════

[CellTypes]
stemFraction = 0.42           # As in Sandra's CC-B-Ic model
transitFraction = 0.49

[CellCycle]
quiescentFraction = 0.5
sloughRadiusFactor = 5
stemCycleMin = 12.0           # Uniform random cell cycle duration (hours)
stemCycleMax = 14.0
taCycleRatio = 1.0            # TA cycle = ratio × stem cycle

# Generational cascade (Meineke et al. 2001)
enableGenerationalCascade = true
maxTransitGenerations = 3     # TA cells differentiate after this many divisions
