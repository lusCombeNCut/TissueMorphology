# CryptBudding Simulation Parameters (Node2D)

# ══════════════════════════════════════════════════════════════
#  SIMULATION
# ══════════════════════════════════════════════════════════════

[Simulation]
modelType = vertex2d
endTime = 50
dt = 0.01
dtGrow = 0.01
relaxationTime = 10
runNumber = 1

# ══════════════════════════════════════════════════════════════
#  FEATURE TOGGLES
# ══════════════════════════════════════════════════════════════

[Features]
enableLumenPressure = true
enableApicalConstriction = false
enableEcmGuidance = false
enableRelaxation = false
enableSloughing = false
enableDifferentialAdhesion = false
enableCurvatureBending = false
enableCellPolarity = false
enableEcmConfinement = true
enableContinuousPvd = false
useTopologyBasedSprings = false    # true = topology-based neighbors (ring/surface), false = distance threshold

# ══════════════════════════════════════════════════════════════
#  GEOMETRY
# ══════════════════════════════════════════════════════════════

[Geometry2D]
numCells2dNode = 18           # NODE-2D: cells on ring → R = N/(2π) ≈ 4.77, spacing = 1.0
numCells2dVertex = 12         # VERTEX-2D: fewer cells = more stable
interactionCutoff2d = 1.5    # NODE-2D: neighbour cutoff (must be > spacing)
t1Threshold2d = 0.05          # VERTEX-2D only (larger = resolve T1 swaps sooner)
t2Threshold2d = 0.01          # VERTEX-2D only (larger = remove triangles before cascading)

[Geometry3D]
numCells3dNode = 30           # NODE-3D: sphere cells → auto-derives organoidRadius3d = √(N/4π)
numCells3dVertex = 18         # VERTEX-3D only
shellThickness3d = 0.5
interactionCutoff3d = 1.5
bmOffset3dVertex = 0

# ══════════════════════════════════════════════════════════════
#  FORCES
# ══════════════════════════════════════════════════════════════

# --- Spring Force (RingSpringForce / GeneralisedLinearSpringForce) ---
[SpringForce]
springStiffness = 5
springCutoff = 1.5

# --- Differential Adhesion Force ---
[DifferentialAdhesionForce]
apicalApicalAdhesion = 1.2
basalBasalAdhesion = 1
apicalBasalAdhesion = 0.5

# --- Lumen Pressure Force ---
[LumenPressureForce]
lumenPressure = 1.0          # Pressure (constant mode) or base pressure (target volume mode)
lumenUseTargetVolume = true  # true = incompressible fluid with growing volume
lumenVolumeGrowthRate = 0.05 # Volume growth rate (fraction per hour, 0.05 = 5%/h)
lumenBulkModulus = 500.0      # Fluid stiffness (how much pressure increases when compressed)

# --- Apical Constriction Force ---
[ApicalConstrictionForce]
apicalConstrictionStrength = 2

# --- Ring Smoothing / Curvature Bending Force ---
[RingSmoothingForce]
bendingStiffness = 20
gammaStemScale = 0.7          # Stem cells are softer
gammaTransitScale = 1
gammaDiffScale = 1.3          # Paneth/differentiated are stiffer

# --- ECM Confinement Force ---
[ECMConfinementForce]
ecmStiffness = 3.0
bmRadiusFraction = 1.25       # BM target radius as fraction of organoidRadius
ecmMaxRadiusFraction = 5.0    # ECM boundary as fraction of organoidRadius
ecmGridSpacing = 0.5        # ECM grid voxel size (should be ~ cell spacing)
ecmGridType = hex          # Grid layout: "square" or "hex"
ecmDegradationRate = 0.5      # ECM density loss per cell per unit time
ecmDiffusionCoeff = 0.1       # Density smoothing coefficient (prevents sharp gradients)

# --- Cell Polarity Force ---
[CellPolarityForce]
polarityBendingStrength = 25
polarityAlignmentStrength = 0.3

# --- ECM Contact Guidance Force (3D only) ---
[ECMGuidanceForce]
ecmBaseSpeed = 0.3            # Base cell migration speed (if guidance enabled)

# ══════════════════════════════════════════════════════════════
#  VERTEX MODEL (Nagai-Honda parameters)
# ══════════════════════════════════════════════════════════════

[VertexModel]
# When Differentail Ahesion is disabled
nhBoundaryAdhesion = 30.0
nhMembraneSurface = 10.0          # Standard value
nhCellCellAdhesion = 12.0         # Standard: adhesion > membrane


# Scale factor 2x on original differential values:
nhStemStemAdhesion = 12.0
nhStemTransitAdhesion = 12.0
nhStemDiffAdhesion = 12.0
nhTransitTransitAdhesion = 12.0
nhTransitDiffAdhesion = 12.0
nhDiffDiffAdhesion = 12.0


# Per-cell-type adhesion (used when enableDifferentialAdhesion = true)
nhStemBoundaryAdhesion = 1.5
nhTransitBoundaryAdhesion = 1.5
nhDiffBoundaryAdhesion = 6.0   # Paneth cells adhere more strongly to boundary
gammaApical = 0.85
gammaBasal = 0.85
gammaLateral = 0.7

# ══════════════════════════════════════════════════════════════
#  CELL TYPES & CYCLE
# ══════════════════════════════════════════════════════════════

[CellTypes]
stemFraction = 0.42           # As in Sandra's CC-B-Ic model
transitFraction = 0.49

[CellCycle]
quiescentFraction = 0.5
sloughRadiusFactor = 5
stemCycleMin = 12.0
stemCycleMax = 14.0
taCycleRatio = 1.0            # TA cycle = ratio × stem cycle

# Generational cascade (Meineke et al. 2001)
enableGenerationalCascade = true
maxTransitGenerations = 3     # TA cells differentiate after this many divisions
